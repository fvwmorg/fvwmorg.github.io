---
title: fvwm-menu-desktop manual page
showtitle: 1
permalink: /Man/fvwm-menu-desktop/index.html
---
<div id="markdown-toc">
<ul class="sectlevel1">
<li><a href="#_name">NAME</a></li>
<li><a href="#_synopsis">SYNOPSIS</a></li>
<li><a href="#_description">DESCRIPTION</a></li>
<li><a href="#_main_options">MAIN OPTIONS</a></li>
<li><a href="#_icons_options">ICONS OPTIONS</a></li>
<li><a href="#_usage">USAGE</a></li>
<li><a href="#_gui">GUI</a></li>
<li><a href="#_examples">EXAMPLES</a></li>
<li><a href="#_bugs">BUGS</a></li>
<li><a href="#_authors">AUTHORS</a></li>
<li><a href="#_copying">COPYING</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>fvwm-menu-desktop - Reads XDG menu files and creates Fvwm menus</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>fvwm-menu-desktop [ <strong>--help</strong>|<strong>-h</strong> ] [ <strong>--version</strong> ] [
<strong>--install-prefix</strong> <em>DIR</em> ] [ <strong>--desktop</strong> <em>NAME</em> ] [ <strong>--menu-type</strong> <em>NAME</em>
] [ <strong>--theme</strong> <em>NAME</em> ] [ <strong>--with-titles</strong>|<strong>-w</strong> ] [ <strong>--without-titles</strong> ]
[ <strong>--enable-mini-icons</strong> ] [ <strong>--size</strong>|<strong>-s</strong> <em>NUM</em> ] [ <strong>--mini-icon-dir</strong>
<em>DIR</em> ] [ <strong>--app-icon</strong> <em>NAME</em> ] [ <strong>--dir-icon</strong> <em>NAME</em> ] [
<strong>--title</strong>|<strong>-t</strong> <em>NAME</em> ] [ <strong>--insert-in-menu</strong> <em>NAME</em> ] [ <strong>--get-menus</strong>
<em>all</em>|<em>desktop</em> ] [ <strong>--set-menus</strong> <em>menu_paths</em> ] [ <strong>--all-menus</strong> ] [
<strong>--include-items</strong> <em>NAME</em> ] [ <strong>--regen-cmd</strong> <em>CMD</em> ] [ <strong>--term-cmd</strong> <em>CMD</em>
] [ <strong>--dynamic</strong> ] [ <strong>--menu-error</strong>|<strong>-e</strong> ] [ <strong>--verbose</strong>|<strong>-v</strong> ]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This is a python script which parses XDG menus definitions to build
corresponding fvwm menus. This script depends on python-xdg to run.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_main_options">MAIN OPTIONS</h2>
<div class="sectionbody">
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--help</strong></dt>
<dd>
<p>Show the help and exit.</p>
</dd>
<dt class="hdlist1"><strong>--version</strong></dt>
<dd>
<p>Show the version and exit.</p>
</dd>
<dt class="hdlist1"><strong>--get-menus</strong> <em>all</em>|<em>desktop</em></dt>
<dd>
<p>Prints a space separated list of full menu paths found on the system.
<em>all</em> will print all menus found on the system except empty ones.
<em>desktop</em> will print the menu(s) that would be generated by the
script.</p>
<div class="paragraph">
<p>No menu generation is done.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--desktop</strong> <em>NAME</em></dt>
<dd>
<p>Optional parameter to set the <em>NAME</em> of the desktop XDG .menu file(s)
to use. This option will override any default menus set via
<strong>FvwmForm-XDGMenu-Config</strong> and cause the script to find menus in which
<em>NAME</em> is a part of the file name. Possible names are: <em>gnome</em>, <em>kde</em>,
<em>xfce</em>, <em>lxde</em>, <em>debian</em>, etc.</p>
<div class="paragraph">
<p>This option can be used in conjunction with <strong>--menu-type</strong> to control
which .menu file(s) are used.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--menu-type</strong> <em>NAME</em></dt>
<dd>
<p>Optional parameter to set the <em>NAME</em> of the XDG menu type to use. This
option will override any default menus set via
<strong>FvwmForm-XDGMenu-Config</strong> and cause the script to find menus in which
<em>NAME</em> is a part of the file name. Possible <em>NAME</em> types could be:
<em>applications</em>, <em>settings</em>, <em>preferences</em>, etc.</p>
<div class="paragraph">
<p>When used in conjunction with <strong>--desktop</strong>, only menus whose file name
matches '<strong>destkop*menutype</strong>' are found. If no menus are found, the
script exits with an error.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--all-menus</strong></dt>
<dd>
<p>This option will build all menus found on the system. If used in
conjunction with <strong>--desktop</strong> or <strong>--menu-type</strong> this will build all
menus matching those settings.</p>
</dd>
<dt class="hdlist1"><strong>--install-prefix</strong> <em>DIR</em></dt>
<dd>
<p>Optional parameter to override the standard locations for XDG menu
definitions. Tells <strong>fvwm-menu-desktop</strong> to look in <em>DIR</em> for .menu
files instead of the standard locations /etc/xdg/menus (and
$HOME/.config/menus if it exists).</p>
</dd>
<dt class="hdlist1"><strong>--with-titles</strong>|<strong>-w</strong></dt>
<dd>
<p>If this option is set menus are generated with titles. This is the
default. This option can be used to override the
<strong>FvwmForm-XDGMenu-Config</strong> default setting.</p>
</dd>
<dt class="hdlist1"><strong>--without-titles</strong></dt>
<dd>
<p>If this option is set menus are generated without titles. The default
is to generate with titles.</p>
</dd>
<dt class="hdlist1"><strong>--title</strong>|<strong>-t</strong> <em>NAME</em></dt>
<dd>
<p>Option to define the menu title <em>NAME</em> of the top menu used by Fvwm&#8217;s
<strong>Menu</strong> or <strong>Popup</strong> commands. Default is "XDGMenu".</p>
</dd>
<dt class="hdlist1"><strong>--include-items</strong> <em>NAME</em></dt>
<dd>
<p>This option controls if the additional menu items 'Regenerate' and
'Configure' are included in the top level menu. <em>NAME</em> can be one of
<em>regenerate</em>, <em>config</em>, <em>both</em>, or <em>none</em>. The default is <em>both</em>.</p>
</dd>
<dt class="hdlist1"><strong>--regen-cmd</strong> <em>CMD</em></dt>
<dd>
<p>This option sets the fvwm command <em>CMD</em> that is run when the menu item
'Regenerate' is selected. The default is "PipeRead
`fvwm-menu-desktop`".</p>
</dd>
<dt class="hdlist1"><strong>--term-cmd</strong> <em>CMD</em></dt>
<dd>
<p>This option sets the terminal emulator command <em>CMD</em> that is used to
to run terminal applications in. <em>CMD</em> needs to end with an execute
option, such as xterm&#8217;s -e option, which will run the command that is
appended to <em>CMD</em>. The default is "xterm -e".</p>
</dd>
<dt class="hdlist1"><strong>--dynamic</strong></dt>
<dd>
<p>This option is to be used with creating dynamic menus using
<strong>DynamicPopUpAction</strong> and <strong>DynamicPopDownAction</strong>. This adds a
'recreate' to the <strong>DestroyMenu</strong> command on the top level menu so those
actions are not Destroyed when the menu is regenerated.</p>
</dd>
<dt class="hdlist1"><strong>--insert-in-menu</strong> <em>NAME</em></dt>
<dd>
<p>Option to insert generated menu(s) <strong>IN</strong> a menu <em>NAME</em> (its top title).
This option makes it so the top level menu is not Destroyed and the
items are added to the end.</p>
<div class="paragraph">
<p>Note menus regenerated with this option will append the menu items at
the end of the existing menu. Each time the menu is regenerated new menu
items appear giving a growing menu of duplicate items. You have to
regenerate the whole menu via a function or restart fvwm. See <strong>EXAMPLES</strong>
below for some solutions.</p>
</div>
</dd>
<dt class="hdlist1"><strong>--set-menus</strong> <em>menu_paths</em></dt>
<dd>
<p>Generates all menus listed in a space separated list of full menu
paths. This option overrides any defaults and
<strong>--desktop</strong>|<strong>--menu-type</strong> settings.</p>
</dd>
<dt class="hdlist1"><strong>--menu-error</strong>|<strong>-e</strong></dt>
<dd>
<p>If this option is present and python-xdg is not found, the script will
print the error in the generated menu. Used in the default-config.</p>
</dd>
<dt class="hdlist1"><strong>--verbose</strong></dt>
<dd>
<p>Enables additional information printouts on STDERR.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_icons_options">ICONS OPTIONS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>By default, fvwm-menu-desktop builds menus without mini-icons. To
enable mini-icons use the following options.</p>
</div>
<div class="paragraph">
<p>If ImageMagick is installed on the system, the script will resize and
copy the icons to $FVWM_USERDIR/.icons. This can take awhile. You should
be prepared to wait the first time you generate the icons. Once the
icons have been generated the script should run faster. If it is still
to slow using icons, see <strong>EXAMPLES</strong> for ways to limit how often the menu
is generated to speed things up.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>--enable-mini-icons</strong></dt>
<dd>
<p>This option enables mini-icons in the menus. If set, 24x24 mini-icons
are used. If the specified icon isn&#8217;t that size it will be converted
if <strong>ImageMagick</strong> is installed and saved in $HOME/.fvwm/icons or to the
directory specified with --mini-icon-dir option. Otherwise no icon
appears in the menu for that entry. With most distributions, all the
menu entries will have mini-icons appropriate to the application.</p>
</dd>
<dt class="hdlist1"><strong>--theme</strong> <em>NAME</em></dt>
<dd>
<p>Defines the used icon theme. Default is <em>gnome</em> but all others found
in /usr/share/icons could be used except the <em>hicolor</em> theme because
it&#8217;s the default fallback theme if no icon is found.</p>
</dd>
<dt class="hdlist1"><strong>--size</strong>|<strong>-s</strong> <em>NUM</em></dt>
<dd>
<p>If --enable-mini-icons is used the <em>size</em> of the icons can changed
with this parameter. Default is 24.</p>
</dd>
<dt class="hdlist1"><strong>--mini-icon-dir</strong> <em>DIR</em></dt>
<dd>
<p>When the right size mini-icon isn&#8217;t available, fvwm-menu-desktop
creates icons with the right size in $HOME/.fvwm/icons. If you don&#8217;t
want to use the default directory, $HOME/.fvwm/icons, use this option
to specify a different folder.</p>
</dd>
<dt class="hdlist1"><strong>--app-icon</strong> <em>NAME</em></dt>
<dd>
<p>Sets the default application icon if no others are found. Default is
'gnome-applications'.</p>
</dd>
<dt class="hdlist1"><strong>--dir-icon</strong> <em>NAME</em></dt>
<dd>
<p>Sets the default directory icon if no others are found. Default is
'gnome-fs-directory'.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_usage">USAGE</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>fvwm-menu-desktop</strong> outputs XDG .menu files in the syntax of fvwm menus.
When <strong>fvwm-menu-desktop</strong> is run with no options, it will load defaults
from the <strong>FvwmForm-XDGMenu-Config</strong> file (see below) then search your
system for suitable menu file(s). To see which menus are available on
your system run:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>fvwm-menu-desktop --get-menus all</pre>
</div>
</div>
<div class="paragraph">
<p>If no menus are found you may not have any installed on your system. By
default menus are stored as <strong>.menu files in /etc/xdg/menus,
$HOME/.config/menus or the location set in $XDG_MENU_PREFIX. You can use
*--install-prefix</strong> to specify another location search for menus.</p>
</div>
<div class="paragraph">
<p>Though a combination of command line options and the
<strong>FvwmForm-XDGMenu-Config</strong> settings, <strong>fvwm-menu-desktop</strong> can generate any
combination of the menus found. To get a list of what menu(s) would be
generated use the <strong>--get-menus</strong> <em>desktop</em> option. The following will
list all menus generated if <strong>fvwm-menu-desktop</strong> was run with no options.</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>fvwm-menu-desktop --get-menus desktop</pre>
</div>
</div>
<div class="paragraph">
<p><strong>fvwm-menu-desktop</strong> determines which menu(s) to generate as follows</p>
</div>
<div class="paragraph">
<p>If no config file is found, all menus will be weighted and the script
will generate the best (highest weight) menu found.</p>
</div>
<div class="paragraph">
<p>If a config file is found (and override options are not used) the script
will generate all menus selected in <strong>FvwmForm-XDGMenu-Config</strong>.</p>
</div>
<div class="paragraph">
<p><strong>--desktop</strong>, <strong>--menu-type</strong>, <strong>--set-menus</strong> and <strong>--all-menus</strong> will
override any menus selected in <strong>FvwmForm-XDGMenu-Config</strong>.</p>
</div>
<div class="paragraph">
<p><strong>--desktop</strong> and <strong>--menu-type</strong> will only include menus whose name matches
'<strong>desktop*menutype</strong>'. If used with <strong>--all-menus</strong>, all matching menus are
generated. If used without <strong>--all-menus</strong>, only the highest weighted menu
is generated.</p>
</div>
<div class="paragraph">
<p><strong>--set-menus</strong> generates menus from the list of full path menu file
names.</p>
</div>
<div class="paragraph">
<p><strong>--all-menus</strong> by itself will generate all menus found.</p>
</div>
<div class="paragraph">
<p>By default <strong>fvwm-menu-desktop</strong> will generate a menu whose top level name
is "XDGMenu". To tell fvwm to read the output of <strong>fvwm-menu-desktop</strong> to
create the menu XDGMenu add the following to your fvwm config file:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>PipeRead 'fvwm-menu-desktop'</pre>
</div>
</div>
<div class="paragraph">
<p><strong>Warning:</strong> Depending on the options used this command may be slow and
fvwm will pause until this command is complete. See <strong>EXAMPLES</strong> below for
more details and possible workarounds.</p>
</div>
<div class="paragraph">
<p>Once the menu is generated you can open the menu by using the command
"Menu XDGMenu". You can also include this in the MenuFvwmRoot menu by:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>AddToMenu MenuFvwmRoot "XDG Menu" Popup XDGMenu</pre>
</div>
</div>
<div class="paragraph">
<p><strong>fvwm-menu-desktop</strong> can be configured though both command line options
and a <strong>FvwmForm</strong> GUI to customize the menu(s) that get generated.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_gui">GUI</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>FvwmForm-XDGMenu-Config</strong> is a <strong>FvwmForm</strong> interface that can be used to
configure the defaults for <strong>fvwm-menu-desktop</strong>. You can access this from
the "Configure" item in the top level menu that is generated or run the
following from within <strong>FvwmConsole</strong></p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>Module FvwmPerl -l fvwm-menu-desktop-config.fpl</pre>
</div>
</div>
<div class="paragraph">
<p>This form can be used to select which menu(s) get generated by default
along with setting many (but not all) of the available options. When you
click "Save Settings" the form will write a config file located at
$FVWM_USERDIR/.FvwmForm-XDGMenu-Config that <strong>fvwm-menu-desktop</strong> will
parse for defaults when run.</p>
</div>
<div class="paragraph">
<p>See the help inside of <strong>FvwmForm-XDGMenu-Config</strong> for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are many ways to setup when fvwm runs <strong>fvwm-menu-desktop</strong> to
generate the menu. One method is to just generate the menu when fvwm
loads and then use the GUI config tool to change any options. To do this
you only need to add the following to the fvwm config file:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>AddToMenu MenuFvwmRoot "XDG Menu" Popup XDGMenu PipeRead
'fvwm-menu-desktop'</pre>
</div>
</div>
<div class="paragraph">
<p>The menu is created once when fvwm loads. Since menu creation can
sometimes be slow, this could cause fvwm to take longer to load than one
wants.</p>
</div>
<div class="paragraph">
<p>The menu is only generated when fvwm starts. If software is installed or
removed you will have to select the 'Regenerate' option to rebuild the
menu.</p>
</div>
<div class="paragraph">
<p>One way to speed things up is to save the menu in a file and only
generate the menu when 'Regenerate' is selected. To do this use
<strong>--regen-cmd</strong> to call a custom function and write the menu to a file
using a command like</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>fvwm-menu-desktop --regen-cmd XDGRegen &gt; $FVWM_USERDIR/.XDGMenu</pre>
</div>
</div>
<div class="paragraph">
<p>Then add the following to the fvwm config file to define the function
XDGRegen. The second to last line will generate the menu if the menu
file doesn&#8217;t exist when fvwm starts.</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>DestroyFunc XDGRegen
AddToFunc   XDGRegen
+ I PipeRead 'fvwm-menu-desktop --regen-cmd XDGRegen &gt; \
    $[FVWM_USERDIR]/.XDGMenu; echo "Nop"'
+ I Read $[FVWM_USERDIR]/.XDGMenu

Test (!f $[FVWM_USERDIR]/.XDGMenu) XDGRegen Read $[FVWM_USERDIR]/.XDGMenu</pre>
</div>
</div>
<div class="paragraph">
<p>Besides creating a top level menu, <strong>fvwm-menu-desktop</strong> can insert the
menu into an existing menu using the <strong>--insert-in-menu</strong> option. For
example one could create the menu MenuFvwmRoot and include the XDG items
at the end.</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>DestroyMenu MenuFvwmRoot
AddToMenu   MenuFvwmRoot "Fvwm" Title
+ "Item1" Action1 ...
+ "ItemN" ActionN
+ "" Nop

PipeRead 'fvwm-menu-desktop --insert-in-menu MenuFvwmRoot'</pre>
</div>
</div>
<div class="paragraph">
<p>In this case the menu items are inserted at the end of the MenuFvwmRoot
menu. If no items are in the menu, this menu becomes MenuFvwmRoot. The
problem here is, that you have to restart fvwm or rebuild the whole menu
to Regenerate it because menu items cannot be removed. To do this you
could use a function like</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>DestroyFunc XDGRegen
AddToFunc   XDGRegen
+ I DestroyMenu MenuFvwmRoot
+ I AddToMenu MenuFvwmRoot "Fvwm" Title
+ I AddToMenu MenuFvwmRoot "Item1" Action1 ...
+ I AddToMenu MenuFvwmRoot "ItemN" ActionN
+ I AddToMenu MenuFvwmRoot "" Nop
+ I PipeRead 'fvwm-menu-desktop --insert-in-menu MenuFvwmRoot \
    --regen-cmd XDGRegen'</pre>
</div>
</div>
<div class="paragraph">
<p>Fvwm can also create menus dynamically by using <strong>DynamicPopUpAction</strong>
and/or <strong>DynamicPopDownAction</strong>. These commands when used with a Menu will
run a Function when the menu is opened. For example one could create the
menu XDGMenu when it is opened using</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>AddToMenu XDGMenu "XDGMenu" Title
+ DynamicPopUpAction PipeRead 'fvwm-menu-desktop'</pre>
</div>
</div>
<div class="paragraph">
<p>This will create the menu when it is opened. One issue here is it will
only create the menu the first time it is opened, and you still have to
Regenerate the menu to see any changes. To create the menu each time it
is open used the <strong>--dynamic</strong> option</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>AddToMenu XDGMenu "XDGMenu" Title
+ DynamicPopUpAction PipeRead 'fvwm-menu-desktop \
    --dynamic --include-items config'
+ DynamicPopDownAction DestroyMenu recreate XDGMenu</pre>
</div>
</div>
<div class="paragraph">
<p>This will now Destroy the menu when it closed so it can be rebuilt the
next time it is opened. The recreate flag doesn&#8217;t completely destroy the
menu keeping the DynamicPopUpAction and DynamicPopDownAction actions.
The <strong>--dynamic</strong> flag includes the recreate option in the generated
menus.</p>
</div>
<div class="paragraph">
<p>To insert a menu into MenuFvwmRoot and still be dynamic you need to use
a function that generates the whole menu. For example</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>DestroyFunc GenRootMenu
AddToFunc GenRootMenu
+ I DestroyMenu recreate MenuFvwmRoot
+ I AddToMenu MenuFvwmRoot "Fvwm" Title
+ I AddToMenu MenuFvwmRoot "Item1" Action1 ...
+ I AddToMenu MenuFvwmRoot "ItemN" ActionN
+ I AddToMenu MenuFvwmRoot "" Nop
+ PipeRead `fvwm-menu-desktop --insert-in-menu MenuFvwmRoot \
    --include-items config`

AddToMenu MenuFvwmRoot "Fvwm" Title
+ DynamicPopUpAction GenRootMenu
+ DynamicPopDownAction DestroyMenu recreate MenuFvwmRoot</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bugs">BUGS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The whole process of creating menus from files is slow. Otherwise report
bugs to the fvwm-workers mailing list &lt;<a href="mailto:fvwm-workers@fvwm.org">fvwm-workers@fvwm.org</a>&gt;.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_authors">AUTHORS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This script is based on fvwm-xdg-menu.py written by Piotr Zielinski
(<a href="http://www.cl.cam.ac.uk/~pz215/" class="bare">http://www.cl.cam.ac.uk/~pz215/</a>) who assigned Licence: GPL 2 Date:
03.12.2005.</p>
</div>
<div class="paragraph">
<p>The script was reworked to replace the existing fvwm-menu-desktop perl
script by the fvwm-workers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_copying">COPYING</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The script is distributed by the same terms as fvwm itself. See GNU
General Public License for details.</p>
</div>
</div>
</div>
