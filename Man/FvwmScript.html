---
title: FvwmScript manual page
showtitle: 1
permalink: /Man/FvwmScript/index.html
---
<div id="markdown-toc">
<ul class="sectlevel1">
<li><a href="#_name">NAME</a></li>
<li><a href="#_synopsis">SYNOPSIS</a></li>
<li><a href="#_description">DESCRIPTION</a></li>
<li><a href="#_invocation">INVOCATION</a></li>
<li><a href="#_configuration_options">CONFIGURATION OPTIONS</a></li>
<li><a href="#_anatomy_of_a_script">ANATOMY OF A SCRIPT</a></li>
<li><a href="#_heading_of_a_script">HEADING OF A SCRIPT</a></li>
<li><a href="#_initialisation">INITIALISATION</a></li>
<li><a href="#_periodic_tasks">PERIODIC TASKS</a></li>
<li><a href="#_the_quit_function">THE QUIT FUNCTION</a></li>
<li><a href="#_main_of_a_script">MAIN OF A SCRIPT</a></li>
<li><a href="#_list_of_widgets">LIST OF WIDGETS</a></li>
<li><a href="#_instructions">INSTRUCTIONS</a></li>
<li><a href="#_arguments">ARGUMENTS</a></li>
<li><a href="#_functions">FUNCTIONS</a></li>
<li><a href="#_conditional_loops">CONDITIONAL LOOPS</a></li>
<li><a href="#_commands">COMMANDS</a></li>
<li><a href="#_examples">EXAMPLES</a></li>
<li><a href="#_a_communication_protocol">A COMMUNICATION PROTOCOL</a></li>
<li><a href="#_bugs">BUGS</a></li>
<li><a href="#_author">AUTHOR</a></li>
<li><a href="#_contributor">CONTRIBUTOR</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_name">NAME</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FvwmScript - module to build graphic user interface</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_synopsis">SYNOPSIS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FvwmScript must be spawned by Fvwm. It will not work from the command
line.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_description">DESCRIPTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FvwmScript is a module which allows you to build many graphical
applications such as desktop accessories, button panel with pop up
menus, modal dialogs&#8230;&#8203; At the startup, FvwmScript reads the file which
is specified on the command line. This file contains the script. This
script is not included in the configuration file of Fvwm.</p>
</div>
<div class="paragraph">
<p>An FvwmScript script is fully controllable by using the keyboard.
(Shift)-Tab circulates around the widgets, Return simulates a mouse
click, the arrows move the cursor or change the values of the widget and
Escape "cancels" for Menu and PopupMenu.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_invocation">INVOCATION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FvwmScript can be invoked by inserting the line `Module FvwmScript
name_of_script' in the .fvwm2rc file. The file "name_of_script" can
start with a slash, in which case, it&#8217;s a fully qualified path, and the
file is read. If "name_of_script" does not start with a slash,
FvwmScript will look in a few different places. If the .fvwm2rc
contained the command line `*FvwmScript: Path
path_of_the_script_directory', FvwmScript will try that directory. If
that doesn&#8217;t work, FvwmScript tries the system configuration directory
and the user configuration directory as described under the "Read"
command in the fvwm man page.</p>
</div>
<div class="paragraph">
<p>The command to start FvwmScript can be placed on a line by itself, if
FvwmScript is to be spawned during fvwm&#8217;s initialization, or can be
bound to a menu or mouse button or keystroke to invoke it later.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuration_options">CONFIGURATION OPTIONS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following commands can be used in the config file (see <em>fvwm</em>(1),
section <strong>MODULE COMMANDS</strong> for details). They are used only if the
corresponding script commands are not used in the script.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">*FvwmScript: DefaultFont font</dt>
<dd>
<p>Specifies the default font to be used. If not specified with this
command or in the script with the Font command, fixed font is assumed.</p>
</dd>
<dt class="hdlist1">*FvwmScript: DefaultFore color</dt>
<dd>
<p>Specifies the default foreground color to be used. If not specified
with this command or in the script with the ForeColor command, black
is used.</p>
</dd>
<dt class="hdlist1">*FvwmScript: DefaultBack color</dt>
<dd>
<p>Specifies the default background color to be used. If not specified
with this command or in the script with the BackColor command, grey85
is used.</p>
</dd>
<dt class="hdlist1">*FvwmScript: DefaultHilight color</dt>
<dd>
<p>Specifies the default hilight color to be used. If not specified with
this command or in the script with the HilightColor command, grey100
is used.</p>
</dd>
<dt class="hdlist1">*FvwmScript: DefaultShadow color</dt>
<dd>
<p>Specifies the default shadow color to be used. If not specified with
this command or in the script with the ShadowColor command, grey55 is
used.</p>
</dd>
<dt class="hdlist1">*FvwmScript: DefaultColorset colorset</dt>
<dd>
<p>Tells the module to use colorset <em>colorset</em> as the default colorset.</p>
</dd>
<dt class="hdlist1">*FvwmScript: DefaultCursor cursor</dt>
<dd>
<p>Tells the module to use X11 cursor <em>cursor</em> as the default for all
widgets. Cursor names are those defined in the include file
X11/cursorfont.h but without XC_ prefix.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_anatomy_of_a_script">ANATOMY OF A SCRIPT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FvwmScript uses a particular programming language. A script is composed
of five parts. Heading contains general characteristics of the window
and default properties for all widgets. The second part contains
instructions whom are executed at the startup of the script. The third
part contains periodic tasks which are executed every second. The fourth
part contains instructions which are executed at exit. And the last part
contains the description of widgets. A widget consists of eleven types
of items: text labels, single-line text inputs, radio buttons, checkbox,
push buttons, horizontal and vertical scrollbars, rectangles, pop up
menus, swallowexecs and mini scrollbars.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_heading_of_a_script">HEADING OF A SCRIPT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The syntax is as follows:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">WindowTitle string</dt>
<dd>
<p>This option sets the window title.</p>
</dd>
<dt class="hdlist1">WindowSize width height</dt>
<dd>
<p>This option sets window size. <em>width</em> and <em>height</em> are numerical
value.</p>
</dd>
<dt class="hdlist1">WindowPosition x y</dt>
<dd>
<p>This option sets window position. <em>x</em> and <em>y</em> are numerical value.</p>
</dd>
<dt class="hdlist1">ForeColor {color}</dt>
<dd>
<p>This option sets the default foreground color for all widgets.</p>
</dd>
<dt class="hdlist1">BackColor {color}</dt>
<dd>
<p>This option sets the default background color for all widgets.</p>
</dd>
<dt class="hdlist1">HilightColor {color}</dt>
<dd>
<p>This option sets the default hilight color for all widgets.</p>
</dd>
<dt class="hdlist1">ShadowColor {color}</dt>
<dd>
<p>This option sets the default shadow color for all widgets.</p>
</dd>
<dt class="hdlist1">Colorset {n}</dt>
<dd>
<p>This option sets the default colorset for all widgets.</p>
</dd>
<dt class="hdlist1">Font {font}</dt>
<dd>
<p>This option sets the default font for all widgets.</p>
</dd>
<dt class="hdlist1">UseGettext [locale_path]</dt>
<dd>
<p>Enable the use of the gettext mechanism which is used by the
WindowLocaleTitle, LocaleTitle, ChangeLocaleTitle instructions and the
Gettext function. If no argument is given, the default FvwmScript
locale catalog is used. This catalog is under the locale fvwm
installation directory and the text domain is FvwmScript
(install_prefix/share/locale/*/LC_MESSAGES/FvwmScript.mo). You can
reset this catalog or add some catalogs exactly in the same way than
with the <strong>LocalePath</strong> fvwm command (see the fvwm manual page). This
instruction should be placed before the WindowLocaleTitle instruction.</p>
</dd>
<dt class="hdlist1">WindowLocaleTitle string</dt>
<dd>
<p>This option sets the window title, but use the locale catalog(s)
defined with UseGettext.</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_initialisation">INITIALISATION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This part contains instructions which will be executed at the startup.
For example:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>Init
Begin
  Do "Exec cat tada.voc &gt; /dev/dsp" WarpPointer 1
  Set $ToDo=Restart End</pre>
</div>
</div>
<div class="paragraph">
<p>These instructions are used to play a sound, move the pointer to widget
1 and to initialize $ToDo to "Restart" at every startup.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_periodic_tasks">PERIODIC TASKS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This part of the script contains instructions that are executed every
second. For example:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>PeriodicTasks
Begin
  If (RemainderOfDiv (GetTime) 10)==0 Then
    Do {Exec xcalc}
  End</pre>
</div>
</div>
<div class="paragraph">
<p>This example shows how to launch xcalc every 10 seconds.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_quit_function">THE QUIT FUNCTION</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This part of the script contains instructions that are executed when the
script exits (after the Quit instruction or if you close the window with
the Close, Delete or Destroy fvwm command). For Example</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>QuitFunc
  Begin
    Do {Echo bye, bye}
  End</pre>
</div>
</div>
<div class="paragraph">
<p>Be aware that if you used the KillModule fvwm command to close the
script, some instructions or functions which rely on the existence of a
communication link between the script and fvwm will not be executed (for
example the Do command). To smoothly kill a script with an fvwm command
see the <strong>COMMANDS</strong> section.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_main_of_a_script">MAIN OF A SCRIPT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The second part of the script contains the description for every widget
in the script. Each widget description has two parts. The first part
describes initial properties, the second part contains instructions that
are executed when the widget receives messages. All widgets can send and
receive messages. All messages are identified by a number. The message
"UserAction" is sent to a widget when the user operates the widget. The
syntax for the first part is:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>Widget         id   # A number between 1 and 999 inclusive
Property
 Type          string
 Size width    height
 Position      x y
 Title         { string }
 Value         int
 MaxValue      int
 MinValue      int
 Font          string
 ForeColor     { color }
 BackColor     { color }
 HilightColor  { color }
 ShadowColor   { color }
 Colorset int
 Flags         flagsOpt</pre>
</div>
</div>
<div class="paragraph">
<p>The flagsOpt option to Flags is a space separated list containing one or
more of the keywords <em>Hidden</em>, <em>NoReliefString</em>, <em>NoFocus</em>, <em>Left</em> /
<em>Center</em> / <em>Right</em>. <em>Hidden</em> is used to specify if the widget is hidden
at startup. <em>NoReliefString</em> specifies if strings are drawn with relief
or not. <em>NoFocus</em> specifies if the widget can get the keyboard focus or
not. By default all widgets take focus, except Rectangle, HDipstick and
VDipstick which cannot. Moreover, the NoFocus widgets are skipped when
you circulate around the widgets with the (Shift-)Tab short cut. <em>Left</em>
/ <em>Center</em> / <em>Right</em> specifies the text position. These apply only to
ItemDraw, List, Menu, PopupMenu and PushButton. The default is <em>Center</em>
for ItemDraw and PushButton and <em>Left</em> for the other widgets.</p>
</div>
<div class="paragraph">
<p>LocaleTitle can be used in place of Title, for using the locale
catalog(s) defined with UseGettext.</p>
</div>
<div class="paragraph">
<p>The position of every widget must be specified.</p>
</div>
<div class="paragraph">
<p>The syntax for the second part is:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>Main
Case message of
  SingleClic:
  Begin
   # list of instructions which will be
   # executed when widget receives
   # message "SingleClic". This message is
   # generated by the user.
  End
  1 :
   Begin
    # list of instructions which will be
    # executed when widget receives
    # message 1
   End
End</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_list_of_widgets">LIST OF WIDGETS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There is fifteen types of widgets.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><strong>CheckBox</strong>: Display check box with a string.</dt>
<dd>
<p><strong>Title</strong>: title of the check box.</p>
<div class="paragraph">
<p><strong>Value</strong>: if Value is equal to 1, the box is checked else it is not.</p>
</div>
<div class="paragraph">
<p>The <strong>Size</strong> property is ignored.</p>
</div>
</dd>
<dt class="hdlist1"><strong>HDipstick</strong>: Display a horizontal dipstick.</dt>
<dd>
<p>This widget can be used to display disk usage.</p>
<div class="paragraph">
<p><strong>Value</strong>: specify the current value of the dipstick.</p>
</div>
<div class="paragraph">
<p><strong>MinValue</strong>: specify the minimum value of the dipstick.</p>
</div>
<div class="paragraph">
<p><strong>MaxValue</strong>: specify the maximum value of the dipstick.</p>
</div>
<div class="paragraph">
<p>A minimum size of 30x11 is imposed.</p>
</div>
</dd>
<dt class="hdlist1"><strong>HScrollBar</strong>: Display an horizontal scrollbar.</dt>
<dd>
<p><strong>Value</strong>: position of the thumb.</p>
<div class="paragraph">
<p><strong>MaxValue</strong>: upper limit of Value.</p>
</div>
<div class="paragraph">
<p><strong>MinValue</strong>: lower limit of Value.</p>
</div>
<div class="paragraph">
<p>The height property is ignored and a minimum width is imposed. The width
should be at least the range plus 37 if all values are to be selectable
e.g. a min of 0 and max of 10 has a range of 11 and therefore should
have a minimum width of 48.</p>
</div>
</dd>
<dt class="hdlist1"><strong>ItemDraw</strong>: Display an icon and/or a string.</dt>
<dd>
<p><strong>Title</strong>: string to display.</p>
<div class="paragraph">
<p><strong>Icon</strong>: icon to display.</p>
</div>
<div class="paragraph">
<p><strong>MaxValue</strong>: x coordinate of the cursor.</p>
</div>
<div class="paragraph">
<p><strong>MinValue</strong>: y coordinate of the cursor.</p>
</div>
<div class="paragraph">
<p>The size is made large enough to contain the title and/or the icon.</p>
</div>
</dd>
<dt class="hdlist1"><strong>List</strong>: Display a list.</dt>
<dd>
<p>List lets user to choose between various options.</p>
<div class="paragraph">
<p><strong>Value</strong>: specify which option is selected.</p>
</div>
<div class="paragraph">
<p><strong>MinValue</strong>: First visible option.</p>
</div>
<div class="paragraph">
<p><strong>Title</strong>: title contains options displayed in the list. The syntax is the
following: {Option 1|Option 2|...|Option N}. All menus are displayed at
the top of window.</p>
</div>
<div class="paragraph">
<p>A minimum height of three items is imposed and the width is made to be
at least 108.</p>
</div>
</dd>
<dt class="hdlist1"><strong>Menu</strong>: Display a menu whom lets user to choose a option.</dt>
<dd>
<p>Items of type Menu are layed out from left to right along the top of
the window. The size and position properties are ignored.</p>
<div class="paragraph">
<p><strong>Value</strong>: specify which option is selected.</p>
</div>
<div class="paragraph">
<p><strong>Title</strong>: title contains options displayed in the menu. The syntax is the
following: {Option 1|Option 2|...|Option N}.</p>
</div>
</dd>
<dt class="hdlist1"><strong>MiniScroll</strong>: Display a very small vertical scrollbar.</dt>
<dd>
<p><strong>Value</strong>: position of the thumb.</p>
<div class="paragraph">
<p><strong>MaxValue</strong>: upper limit of Value.</p>
</div>
<div class="paragraph">
<p><strong>MinValue</strong>: lower limit of Value.</p>
</div>
<div class="paragraph">
<p>The size is set to 19x34.</p>
</div>
</dd>
<dt class="hdlist1"><strong>PopupMenu</strong>: Display a pop up menu.</dt>
<dd>
<p><strong>Value</strong>: specify what option is selected.</p>
<div class="paragraph">
<p><strong>Title</strong>: the title has the following syntax: {Option 1|Option
2|&#8230;&#8203;|Option N}."Option 1|Option 2|&#8230;&#8203;|Option N" is the pop up menu
which is displayed when pressing mouse button.</p>
</div>
<div class="paragraph">
<p>The size property is ignored.</p>
</div>
</dd>
<dt class="hdlist1"><strong>PushButton</strong>: Display push button with an icon and/or a string.</dt>
<dd>
<p><strong>Title</strong>: this string has the following syntax {Title of the
button|Option 1|Option 2|Option3|&#8230;&#8203;|Option N}. "Option 1|Option
2|&#8230;&#8203;|Option N" is the pop up menu which is displayed when pressing
the right button.</p>
<div class="paragraph">
<p><strong>Icon</strong>: icon to display.</p>
</div>
<div class="paragraph">
<p>The button is made large enough to fit the icon and or label.</p>
</div>
</dd>
<dt class="hdlist1"><strong>RadioButton</strong>: Display radio button with a string.</dt>
<dd>
<p><strong>Title</strong>: title of the radio button.</p>
<div class="paragraph">
<p><strong>Value</strong>: if Value is equal to 1, the box is checked else it is not.</p>
</div>
<div class="paragraph">
<p>The size property is ignored</p>
</div>
</dd>
<dt class="hdlist1"><strong>Rectangle</strong>: Display a rectangle.</dt>
<dd>
<p>This type of widget can be used to decorate window.</p>
</dd>
<dt class="hdlist1"><strong>SwallowExec</strong></dt>
<dd>
<p>This type of widget causes FvwmScript to spawn an process, and capture
the first window whose name or resource is equal to Title, and display
it in the script window.</p>
<div class="paragraph">
<p><strong>Title</strong>: specify the window name which be captured and displayed in the
script window.</p>
</div>
<div class="paragraph">
<p><strong>SwallowExec</strong>: specify the command line to execute to spawn the process.
Modules can also be swallowed.</p>
</div>
<div class="paragraph">
<p><strong>Value</strong>: specify the looking of the border. Possible value: -1, 0, 1.</p>
</div>
<div class="paragraph">
<p>The size is made to be at least 30x30</p>
</div>
</dd>
<dt class="hdlist1"><strong>TextField</strong>: Display a text input field.</dt>
<dd>
<p>The text input field can be used to edit a single-line string.</p>
<div class="paragraph">
<p><strong>Title</strong>: content of text field.</p>
</div>
<div class="paragraph">
<p><strong>Value</strong>: position of the insert point.</p>
</div>
<div class="paragraph">
<p><strong>MinValue</strong>: position of the end of the selection.</p>
</div>
<div class="paragraph">
<p><strong>MaxValue</strong>: first visible character of the title</p>
</div>
<div class="paragraph">
<p>The height property is ignored, the width is made to be at least 40
pixels wider than the initial contents.</p>
</div>
</dd>
<dt class="hdlist1"><strong>VDipstick</strong>: Display a vertical dipstick.</dt>
<dd>
<p><strong>Value</strong>: specify the current value of the dipstick.</p>
<div class="paragraph">
<p><strong>MinValue</strong>: specify the minimum value of the dipstick.</p>
</div>
<div class="paragraph">
<p><strong>MaxValue</strong>: specify the maximum value of the dipstick.</p>
</div>
<div class="paragraph">
<p>The size is made to be at least 11x30.</p>
</div>
</dd>
<dt class="hdlist1"><strong>VScrollBar</strong>: Display a vertical scrollbar.</dt>
<dd>
<p><strong>Value</strong>: position of the thumb.</p>
<div class="paragraph">
<p><strong>MaxValue</strong>: upper limit of Value.</p>
</div>
<div class="paragraph">
<p><strong>MinValue</strong>: lower limit of Value.</p>
</div>
<div class="paragraph">
<p>The width property is ignored and a minimum height is imposed. The
height should be at least the range plus 37 if all values are to be
selectable e.g. a min of 0 and max of 10 has a range of 11 and therefore
should have a minimum height of 48.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instructions">INSTRUCTIONS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here is the description of all instructions.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">HideWidget id : hide the widget numbered id.</dt>
<dt class="hdlist1">ShowWidget id: show the widget numbered id.</dt>
<dt class="hdlist1">ChangeValue id1 id2</dt>
<dd>
<p>Set the value of the widget numbered <em>id1</em> to <em>id2</em>.</p>
</dd>
<dt class="hdlist1">ChangeMaxValue id1 id2</dt>
<dd>
<p>Set the maximum value of the widget numbered <em>id1</em> to <em>id2</em>.</p>
</dd>
<dt class="hdlist1">ChangeMinValue id1 id2</dt>
<dd>
<p>Set the minimum value of the widget numbered <em>id1</em> to <em>id2</em>.</p>
</dd>
<dt class="hdlist1">ChangeTitle id1 id2</dt>
<dd>
<p>Set the title of the widget numbered <em>id1</em> to <em>id2</em>.</p>
</dd>
<dt class="hdlist1">ChangeWindowTitle string</dt>
<dd>
<p>Set the title of the window to <em>string</em>.</p>
</dd>
<dt class="hdlist1">ChangeWindowTitleFromArg numarg</dt>
<dd>
<p>Set the title of the window to the value of the <em>numarg</em>-th script
argument.</p>
</dd>
<dt class="hdlist1">ChangeLocaleTitle id1 id2</dt>
<dd>
<p>As ChangeTitle but use the locale catalog(s) defined with UseGettext.</p>
</dd>
<dt class="hdlist1">ChangeIcon id1 id2</dt>
<dd>
<p>Set the icon of the widget numbered <em>id1</em> to <em>id2</em>.</p>
</dd>
<dt class="hdlist1">ChangeForeColor id1 {color}</dt>
<dd>
<p>Set the foreground color of the widget numbered <em>id1</em> to {<em>color</em>}.</p>
</dd>
<dt class="hdlist1">ChangeBackColor id1 {color}</dt>
<dd>
<p>Set the background color of the widget numbered <em>id1</em> to {<em>color</em>}.</p>
</dd>
<dt class="hdlist1">ChangeColorSet id1 id2</dt>
<dd>
<p>Set the colorset of the widget numbered <em>id1</em> to <em>id2</em>. Specifying
widget 0 sets the main window colorset.</p>
</dd>
<dt class="hdlist1">ChangePosition id1 x y</dt>
<dd>
<p>Move the widget numbered <em>id1</em> to position (<em>x</em>,<em>y</em>).</p>
</dd>
<dt class="hdlist1">ChangeSize id1 width height</dt>
<dd>
<p>Set the size of the widget numbered <em>id1</em> to (<em>width</em>,<em>height</em>).</p>
</dd>
<dt class="hdlist1">ChangeFont id1 newfont</dt>
<dd>
<p>Set the font of the widget numbered <em>id1</em> to <em>newfont</em>.</p>
</dd>
<dt class="hdlist1">WarpPointer id</dt>
<dd>
<p>Warp the mouse pointer into the widget numbered <em>id</em>.</p>
</dd>
<dt class="hdlist1">WriteToFile filename {str1} {str2} etc</dt>
<dd>
<p>Write to the file <em>filename</em> the string which is the concatenation of
all arguments <em>str1</em>, <em>str2</em>, etc.</p>
</dd>
<dt class="hdlist1">Do {command args}</dt>
<dd>
<p>Execute the fvwm command inside the Do block. Any fvwm command as
described in the fvwm man page can be used. Commands are sent from
this module to the fvwm main program for processing. The length of the
command and arguments can not exceed 988 characters.</p>
</dd>
<dt class="hdlist1">Set $var={str1} {str2} etc</dt>
<dd>
<p>Concatenate all arguments to a string and set the variable $<em>var</em> to
this string.</p>
</dd>
<dt class="hdlist1">Quit: quit the program.</dt>
<dt class="hdlist1">SendSignal id1 id2</dt>
<dd>
<p>Send a message numbered <em>id2</em> to widget <em>id1</em>.</p>
</dd>
<dt class="hdlist1">SendToScript id_script {str11} {str2} etc</dt>
<dd>
<p>Send a message to the script identified by id_script. The message is
the concatenation of str1, str2&#8230;&#8203;</p>
</dd>
<dt class="hdlist1">Key <em>Keyname</em> <em>Modifier</em> <em>id</em> <em>sig</em> <em>str1</em> <em>str2</em> etc</dt>
<dd>
<p>Binds a keyboard key to the instruction</p>
<div class="paragraph">
<p>SendSignal <em>id</em> <em>sig</em></p>
</div>
<div class="paragraph">
<p>and sets the "last string" to the concatenation of str1, str2&#8230;&#8203; (see
the LastString function). The <em>Keyname</em> and <em>Modifiers</em> fields are
defined as in the fvwm Key command.</p>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_arguments">ARGUMENTS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Most of commands use arguments. There are two kinds of arguments:
numbers and strings. A numerical argument is a value which is between
-32000 and +32000. A string is always surrounded with braces. Variables
always begin with the character "$" and can contain both numbers and
strings.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_functions">FUNCTIONS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>All functions use arguments. Functions can return both a string and a
number. The syntax is: (function argument1 argument2 etc)</p>
</div>
<div class="paragraph">
<p>Here is the complete list of arguments:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">(GetTitle id)</dt>
<dd>
<p>Return the title of the widget numbered <em>id</em>.</p>
</dd>
<dt class="hdlist1">(GetValue id)</dt>
<dd>
<p>Return the current value of the widget numbered <em>id</em>.</p>
</dd>
<dt class="hdlist1">(GetMinValue id)</dt>
<dd>
<p>Return the current Min value of the widget numbered <em>id</em>.</p>
</dd>
<dt class="hdlist1">(GetMaxValue id)</dt>
<dd>
<p>Return the current Max value of the widget numbered <em>id</em>.</p>
</dd>
<dt class="hdlist1">(GetFore id)</dt>
<dd>
<p>Return the current RGB foreground value of the widget numbered <em>id</em> in
the hex format RRGGBB.</p>
</dd>
<dt class="hdlist1">(GetBack id)</dt>
<dd>
<p>Return the current RGB background value of the widget numbered <em>id</em> in
the hex format RRGGBB.</p>
</dd>
<dt class="hdlist1">(GetHilight id)</dt>
<dd>
<p>Return the current RGB hilight value of the widget numbered <em>id</em> in
the hex format RRGGBB.</p>
</dd>
<dt class="hdlist1">(GetShadow id)</dt>
<dd>
<p>Return the current RGB shadow value of the widget numbered <em>id</em> in the
hex format RRGGBB.</p>
</dd>
<dt class="hdlist1">(GetOutput {str} int1 int2)</dt>
<dd>
<p>Executes the command <em>str</em>, gets the standard output and returns the
word which is in the line <em>int1</em> and in the position <em>int2</em>. If <em>int2</em>
is equal to -1, GetOutput returns the complete line.</p>
</dd>
<dt class="hdlist1">(NumToHex int)</dt>
<dd>
<p>Return the hexadecimal value of <em>int</em>.</p>
</dd>
<dt class="hdlist1">(HexToNum {str})</dt>
<dd>
<p>Return the decimal value of <em>str</em>, <em>str</em> must be an hexadecimal value.</p>
</dd>
<dt class="hdlist1">(Add int1 int2)</dt>
<dd>
<p>Return the result of (<em>int1</em>+<em>int2</em>).</p>
</dd>
<dt class="hdlist1">(Mult int1 int2)</dt>
<dd>
<p>Return the result of (<em>int1</em>*<em>int2</em>).</p>
</dd>
<dt class="hdlist1">(Div int1 int2)</dt>
<dd>
<p>Return the result of (<em>int1</em>/<em>int2</em>).</p>
</dd>
<dt class="hdlist1">(StrCopy {str} int1 int2)</dt>
<dd>
<p>Return the string whom is between position int1 and int2. For example,
(StrCopy {Hello} 1 2) returns {He}</p>
</dd>
<dt class="hdlist1">(LaunchScript {str})</dt>
<dd>
<p>This function launches the script named str and returns an
identification number. This number is necessary to use the functions
SendToScript and ReceiveFromScript. The string str contains the script
name and some arguments.</p>
</dd>
<dt class="hdlist1">(GetScriptArgument {int})</dt>
<dd>
<p>This function returns the argument script used in the function
LaunchScript. If int is equal to zero, GetScriptArgument returns the
name of the script.</p>
</dd>
<dt class="hdlist1">(GetScriptFather)</dt>
<dd>
<p>This function returns the identification number of the script father.</p>
</dd>
<dt class="hdlist1">(ReceivFromScript {int})</dt>
<dd>
<p>This function returns the message sent by the script numbered int.</p>
</dd>
<dt class="hdlist1">(RemainderOfDiv {int1 int2}): t</dt>
<dd>
<p>This function returns the remainder of the division (<em>int1</em>/<em>int2</em>).</p>
</dd>
<dt class="hdlist1">(GetTime)</dt>
<dd>
<p>This function returns the time in seconds.</p>
</dd>
<dt class="hdlist1">(GetPid)</dt>
<dd>
<p>This function returns the process id of the script.</p>
</dd>
<dt class="hdlist1">(Gettext {<em>str</em>})</dt>
<dd>
<p>This function return the translation of <em>str</em> by using the locale
catalog(s) defined with UseGettext.</p>
</dd>
<dt class="hdlist1">(SendMsgAndGet {<em>comId</em>} {<em>cmd</em>} <em>bool</em>)</dt>
<dd>
<p>Sends the command <em>cmd</em> with identifier <em>comId</em> to an external program
ready to communicate with the script using a protocol specific to
FvwmScript. If <em>bool</em> is 0 FvwmScript does not wait for an answer from
the external program. In this case the returned value is 1 if the
message can be sent to the external program and 0 if this is not the
case. If <em>bool</em> is 1, then FvwmScript waits for an answer from the
external program and the return value is this answer (a line of no
more than 32000 characters). If the communication fails, the returned
value is 0. See the section <strong>A COMMUNICATION PROTOCOL</strong> for a
description of the communication protocol used.</p>
</dd>
<dt class="hdlist1">(Parse {<em>str</em>} <em>int</em>)</dt>
<dd>
<p>where <em>str</em> must be a string of the form: X1S1X2S2X3S3&#8230;&#8203;SnXn</p>
<div class="paragraph">
<p>where the Xn are numbers containing four decimal digits and where Sn are
strings of length exactly Xn. The returned value is the string S<em>int</em>.
If <em>int</em> is out of range (e.g., &gt;n) the returned value is the empty
string. If <em>str</em> is not of the specified form, the return value is
unpredictable (but empty in the average). This function is useful to
handle strings returned by the SendMsgAndGet function.</p>
</div>
</dd>
<dt class="hdlist1">(LastString)</dt>
<dd>
<p>This function returns the "current working string" for the Key
instruction and the SendString command (see the <strong>COMMANDS</strong> section).
At startup this string is empty, but when a Key binding is detected
(respectively, a SendString command is received), then this string is
set to the string associated to the instruction (respectively, to the
command).</p>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conditional_loops">CONDITIONAL LOOPS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are three kinds of conditional loops. The instruction
"If-Then-Else" has the following syntax:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>If $ToDo=={Open xcalc} Then
  Do {Exec xcalc &amp;} 		# List of instructions
  Else
  Begin
    Do {Exec killall xcalc &amp;} 	# List of instructions
    Do {Exec echo xcalc killed &gt;/dev/console}
  End</pre>
</div>
</div>
<div class="paragraph">
<p>The second part "Else-Begin-End" is optional. If the loop contains only
one instruction, Begin and End can be omitted. The instruction
"While-Do" has the following syntax:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>While $i&lt;5 Do
Begin
  Set $i=(Add i 1) 		# List of instructions
End</pre>
</div>
</div>
<div class="paragraph">
<p>Two strings can be compared with "==" and two numbers can be compared
with "&lt;", "&#8656;", "==", "&gt;=", "&gt;". The loop "For-Do-Begin-End" has the
following syntax:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>For $i=1 To 20 Do
Begin
  Do {Exec xcalc &amp;} 		# List of instructions
End</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_commands">COMMANDS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following fvwm command may be executed at any time</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>SendToModule <em>ScriptName</em> SendString <em>id</em> <em>sig</em> <em>str</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>it sends to any module with alias or name which matches <em>ScriptName</em> the
string</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>SendString <em>id</em> <em>sig</em> <em>str</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>When an FvwmScript receives such a message it sends to the Widget <em>id</em>
the signal numbered <em>sig</em> and the string <em>str</em> can be obtained with the
LastString function. Let us give an example. Say that you have a script
MyScript with the widget:</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>Widget 50
Property
  Type PushButton
  Title {Quit}
  ...
Main
Case message of
  SingleClic:
     Begin
       Quit
  End

  1 :
  Begin
    Set $str = (LastString)
    If $str == {Quit} Then
      Quit
    Else
      ChangeTitle 33 $str
  End
End</pre>
</div>
</div>
<div class="paragraph">
<p>Then the command</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>SendToModule MyScript SendString 50 1 str</pre>
</div>
</div>
<div class="paragraph">
<p>forces MyScript to exit if str is equal to "Quit" and if not it changes
the title of Widget 33 to str.</p>
</div>
<div class="paragraph">
<p>This command can be used to change the window title</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>SendToModule <em>ScriptName</em> ChangeWindowTitle <em>newTitle</em> <em>[oldTitle]</em></p>
</div>
</div>
</div>
<div class="paragraph">
<p>it causes that any module with alias or name which matches <em>ScriptName</em>
changes its associated window title to <em>newTitle</em>. The optional argument
<em>oldTitle</em> makes sense when there are several instances of the same
script. It permits one to avoid changing the name of all these instances
by specifying the name of the window associated to the target script
(see the example below).</p>
</div>
<div class="literalblock highlight">
<div class="content">
<pre>+ I Module FvwmScript FvwmStorageSend "/dev/hda6"
+ I Wait FvwmStorageSend
+ I SendToModule FvwmStorageSend ChangeWindowTitle HDA6
+ I Module FvwmScript FvwmStorageSend "/dev/hda1"
+ I Wait FvwmStorageSend
+ I SendToModule FvwmStorageSend ChangeWindowTitle HDA1 FvwmStorageSend</pre>
</div>
</div>
<div class="paragraph">
<p>Without the FvwmStorageSend argument in the last case, the SendToModule
command would have changed to HDA1 the name of both instances of
FvwmStorageSend.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_examples">EXAMPLES</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You will find examples of scripts in the fvwm configuration directory.</p>
</div>
<div class="paragraph">
<p>FvwmScript-BellSetup, FvwmScript-KeyboardSetup, FvwmScript-PointerSetup
and FvwmScript-ScreenSetup are a set of scripts that modify X settings.
These scripts save preferences into a file named ~/.xinit-fvwmrc (If you
want to use another file name, give it as the first argument of the
script). If you want to load these preferences at every startup, you
have to include the line ".xinit-fvwmrc" in your .xinitrc (or .xsession)
file before starting fvwm.</p>
</div>
<div class="paragraph">
<p>FvwmScript-BaseConfig modifies fvwm focus and paging mouse policy,
window placement, opacity and other features of the move and resize
commands, snap attraction and shading animation. This script saves
preferences into a file named .FvwmBaseConfig in the user&#8217;s data
directory (i.e., $HOME/.fvwm or $FVWM_USERDIR if set). If you want to
load these preferences at every startup you must add the line "Read
.FvwmBaseConfig" in your fvwm configuration file. If you want to use
another file name, give it as the first argument of the script. When you
click on Ok or Apply an fvwm function that you may define named
BaseConfigOkFunc or BaseConfigApplyFunc is called. This allows for
reloading specific application styles that the script has destroyed
(e.g., AddToFunc BaseConfigOkFunc I Read MyAppStyle).</p>
</div>
<div class="paragraph">
<p>FvwmScript-Buttons is a buttons panel which can replace FvwmButtons
(this script supports popup menus and requires xload, xclock, FvwmPager,
TkDesk). FvwmScript-Colorset allows you to edit your colorset.
FvwmScript-Date allows you to set date and time. FvwmScript-FileBrowser
is a file browser used by the other scripts. FvwmScript-Find is an
elementary front-end to find. FvwmScript-Quit allows one to quit fvwm,
restart fvwm or some other window manager, or shut down and reboot the
computer. FvwmScript-ScreenDump is a screen dumper.
FvwmScript-WidgetDemo is a pure example script. See the next section for
FvwmScript-ComExample.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_communication_protocol">A COMMUNICATION PROTOCOL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FvwmScript is a weak (but simple) programming language. If you need to
deal with a lot of data and/or you need to use complex algorithms you
should use an external program (in perl for example) and "send" the
desired information to your FvwmScript script. The first approach is to
use the GetOutput function. This is simple but you should rerun your
external program each time you need information from it (and this may
cause performances problems). The second approach is to use the
SendMsgAndGet function which extends FvwmScript by using any programming
language which can deal with named pipes (fifos). We describe this
solution in this section. (A third approach is to use fvwm-themes-com
from the fvwm-themes package, but in fact the SendMsgAndGet method is an
implementation of fvwm-themes-com inside FvwmScript and this gives
better performance).</p>
</div>
<div class="paragraph">
<p>Basically, you start an "external" program (the program for short) from
your FvwmScript script (the script for short). This program runs in the
background and you use the SendMsgAndGet function in your script to ask
questions or to give instructions to the program. The program must
strictly respect a certain communication protocol. First of all there is
an identifier <em>comId</em> for the communication, it should contain the
process id of the script for a good implementation of the protocol (use
the GetPid function and pass the <em>comId</em> via an option to the program).
The protocol uses two fifos, in the fvwm user directory, named:
.tmp-com-in-<em>comId</em> and .tmp-com-out-<em>comId</em>. The program should create
and listen on the .tmp-com-in-<em>comId</em> fifo. Then, when FvwmScript
executes a function of the form:</p>
</div>
<div class="exampleblock">
<div class="content">
<div class="paragraph">
<p>Set $answer = (SendMsgAndGet {<em>comId</em>} {<em>cmd</em>} <em>bool</em>)</p>
</div>
</div>
</div>
<div class="paragraph">
<p>FvwmScript writes the <em>cmd</em> on this fifo. This way the program can read
the <em>cmd</em> and can execute the appropriate action (it should remove the
in fifo to support multi-communications). If <em>bool</em> is 0, FvwmScript
does not wait for an answer from the program and return 1 if the
previous actions succeed and 0 if they failed (then the program should
"go back" to the in fifo). If <em>bool</em> is 1, then FvwmScript waits (20
sec) for an answer from the program and in turn returns the answer to
the script (note that <em>bool</em> is not passed to the program as it must
know which commands need an answer). To answer, the program creates the
.tmp-com-out-<em>comId</em> fifo and writes the answer on it. The program
should wait until FvwmScript reads the answer and then it should remove
the out fifo and go back to the in fifo. The answer should consist of
one line of no more than 32000 characters (take a look at the Parse
function to handle multiple lines as one line).</p>
</div>
<div class="paragraph">
<p>A simple way to understand this protocol and to write scripts and
programs that use it is to take a look at the (not useful) example
FvwmScript-ComExample and fvwm-script-ComExample.pl (that can found in
the fvwm data directory). Moreover, this implementation of the protocol
solves questions as: What to do if the script exits for a bad reason?
What to do if the program exits for a bad reason? &#8230;&#8203;etc.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bugs">BUGS</h2>
<div class="sectionbody">
<div class="paragraph">
<p>FvwmScript crashes if widgets are accessed that have not been defined.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_author">AUTHOR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Frederic Cordier (<a href="mailto:cordie97@cui.unige.ch">cordie97@cui.unige.ch</a> or <a href="mailto:f-cord96@univ-lyon1.fr">f-cord96@univ-lyon1.fr</a>).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_contributor">CONTRIBUTOR</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Eddy J. Gurney (<a href="mailto:eddy@gizmo.aa.ans.net">eddy@gizmo.aa.ans.net</a>).</p>
</div>
</div>
</div>
